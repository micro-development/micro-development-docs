# 问题汇总


::: tip 说明
这里将 `微开发` 中涉及到的一些各种问题进行汇总，方便查找和理解。
:::

## 问题列表

### 问：脚手架使用ssh协议操作git，提示：Are you sure you want to continue connecting (yes/no/[fingerprint])? 怎么办？

答：这是 ssh协议 的一种默认行为，意思是 你当前本机和通信的服务器(这里是指git所在服务器)是第一次通过 ssh协议 的方式，需要进行一次握手确认，输入 yes 之后，会在 `~/.ssh/known_hosts` 文件中生成一个唯一指纹（本机和本次连接的远端服务器），后续就不会再提示。

本机输入 yes 虽然可以解决问题。但在服务器发布时，Jenkins 自动执行，无法输入 yes ，这会存在问题。

解决办法：方式不止一种，第一种服务器进行设置，可以跳过握手确认，但有时候我们可能是需要其他git平台的仓库，这个时候从服务器解决，就不行了。

所以最终还是通过我们本机客户端解决，步骤如下：


1. 打开终端（window 记得用 git bash）
2. vim ~/.ssh/config # 如果没有该文件 ，这条命令会自动创建文件，并打开 vim 编辑器模式，输入 i 可进行编辑
3. 复制 StrictHostKeyChecking no 到文件中
4. 保存退出即可。 # 以后任何平台 ssh 第一次连接，都不会再提示。

Jenkins 发布时，Jenkins 所在机器，按照同样的方式设置即可。

### 问：脚手架运行环境

答：脚手架内部需要执行 git 命令，所以 window 需要安装 git bash命令行工具，需要在 git bash 终端下执行，window 自带 cmd 不支持。

### 问： 主业务仓库嵌套依赖子仓库，主业务仓库操作git会不会有问题？

答：主业务仓库中，嵌套的依赖子仓库，将在主仓库中被 git 忽略掉，所以操作主业务仓库时，会忽略嵌套的依赖子仓库，不会把依赖的子仓库提交上去。


### 问：使用 `cli脚手架` 操作依赖的子仓库git时，会不会影响到主业务仓库？

答：这个问题首先要了解一下在 终端 执行 git 命令时的上下文概念，什么是上下文概念呢？

假设，你现在执行 git status 命令，那么，你执行命令所处位置（目录），则必须是一个仓库，你这个仓库目录，就是git的上下文。

然后，当出现了 仓库嵌套子仓库时，只要你没有进入到子仓库的目录，那么，你所处的Git上下文，依然是外层的Git仓库。

但是，当你一旦进入到子仓库目录时，你所处的Git上下文，则变成了当前所处的子git仓库，你在执行git的任何命令，都是操作的当前子git仓库，和外层git仓库没有一点关系。

需要注意的是：当在外层git仓库时，想直接操作子仓库，正常情况，需要 cd 子仓库中，然后执行 git 的各种命令，这比较繁琐，很麻烦。

不过还好，git提供了一个仓库 -C 可以指定git仓库上下文，比如在外层git仓库执行 git -C 子仓库的目录位置 status 时，这个时候，就等同于 cd 子仓库的目录位置 && git status 。

脚手架内部，就是用到了 -C 这个参数。

::: warning 注意注意注意
git 参数 -C , 需要 git的版本 1.9.x 才支持，本机安装的一般都是最新的，而 Linux 系统中，如果使用 yum 安装，大多默认版本都是 1.8.x ，如果版本不对，则需要升级。
:::

### 问：git版本升级会不会影响现在git功能？

正常来讲，升级一个小版本号，应该不会有问题。

## 备注

本文中涉及了一些颇多技术方面的概念和知识，可能会有不当之处，如有不对之处，还请指出，以免给他人造成误解，非常感谢。


## 联系我

- 作者：老君
- Email：yaimeet@163.com
- Github: [https://github.com/yaimeet](https://github.com/yaimeet)
- QQ/WeChat：823393100

