(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{354:function(t,s,a){"use strict";a.r(s);var e=a(42),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"脚手架"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#脚手架"}},[t._v("#")]),t._v(" 脚手架")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("说明")]),t._v(" "),a("p",[t._v("这个脚手架的实现是为了解决，使用Git仓库作为包管理，提供的一系列标准规范，就像使用 "),a("code",[t._v("npm命令")]),t._v(" 管理 "),a("code",[t._v("npm包")]),t._v(" 一样，但最后业务中逻辑怎么写，和脚手架是没有关系的，知悉知悉！")])]),t._v(" "),a("div",{staticClass:"custom-block danger"},[a("p",{staticClass:"custom-block-title"},[t._v("须知，术语定义")]),t._v(" "),a("p",[t._v("由于本篇中涉及了其他知识点和一些概念，下对一些词做一个预定义解释，方便快速理解。")])]),t._v(" "),a("ul",[a("li",[t._v("配置文件：通过脚手架生成且后续管理依赖所需的配置文件：micro-development.json")]),t._v(" "),a("li",[t._v("cli：脚手架简称")]),t._v(" "),a("li",[t._v("npm：前端包管理工具，不用说了")]),t._v(" "),a("li",[t._v("repo：git仓库")]),t._v(" "),a("li",[t._v("repoName：git仓库名称")]),t._v(" "),a("li",[t._v("branch：git仓库的分支")]),t._v(" "),a("li",[t._v("branchName：git仓库的分支名称")]),t._v(" "),a("li",[t._v("npmPakcage：npm包")]),t._v(" "),a("li",[t._v("gitPackage：也就是git仓库，在脚手架中被称为：git包")]),t._v(" "),a("li",[t._v("packageKey: 配置文件中 对 "),a("code",[t._v("gitPackage")]),t._v(" 生成的唯一标识，同时，也是该 "),a("code",[t._v("gitPackage")]),t._v(" 在本地存在的 "),a("code",[t._v("物理文件夹（目录）")]),t._v(" 名称")]),t._v(" "),a("li",[t._v("gitCommand：操作的Git命令，如：git status , git add , git commit 等")]),t._v(" "),a("li",[t._v("主业务仓库：你现在负责的业务的Git仓库")]),t._v(" "),a("li",[t._v("依赖的业务仓库：你现在的业务仓库，依赖的其他git仓库（就像你开发一个npm包实现某个功能，依赖了其他的npm包一样）")]),t._v(" "),a("li",[t._v("子仓库：如果没有特殊说明，等同于："),a("code",[t._v("依赖的业务仓库")])]),t._v(" "),a("li",[t._v("项目：如果没有特殊说明，等同于 "),a("code",[t._v("主业务仓库")])])]),t._v(" "),a("h2",{attrs:{id:"核心功能"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#核心功能"}},[t._v("#")]),t._v(" 核心功能")]),t._v(" "),a("p",[t._v("脚手架的主要功能是解决两个问题：把 "),a("code",[t._v("repo")]),t._v(" 作为依赖包的管理操作 和 简化 "),a("code",[t._v("gitCommand")]),t._v(" 的操作。")]),t._v(" "),a("h3",{attrs:{id:"管理依赖"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#管理依赖"}},[t._v("#")]),t._v(" 管理依赖")]),t._v(" "),a("p",[t._v("依赖的管理，就像 "),a("code",[t._v("npm")]),t._v(" 一样，可以通过 配置文件 管理 "),a("code",[t._v("npmPackage")]),t._v(" 。")]),t._v(" "),a("h3",{attrs:{id:"简化git操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#简化git操作"}},[t._v("#")]),t._v(" 简化git操作")]),t._v(" "),a("p",[t._v("为什么会有 简化 "),a("code",[t._v("gitCommand")]),t._v(" 操作？通过 "),a("a",{attrs:{href:"/concept"}},[t._v("概念")]),t._v(" ，可以了解到 "),a("code",[t._v("微开发模式")]),t._v(" 最后的效果就是 "),a("code",[t._v("主业务仓库")]),t._v(" 嵌套 "),a("code",[t._v("依赖的业务仓库")]),t._v(" , 那么最终，其实就是在操作 "),a("code",[t._v("git")]),t._v(" 。")]),t._v(" "),a("p",[t._v("由于是 嵌套 的关系，那么在操作 "),a("code",[t._v("子仓库")]),t._v(" 的时候，肯定会有一些麻烦，所以脚手架内部进行了封装，简化这个操作。")]),t._v(" "),a("h2",{attrs:{id:"安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[t._v("#")]),t._v(" 安装")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -g micro-development-cli\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("安装完成之后，全局使用命令名称："),a("code",[t._v("md-cli")]),t._v(" 。")]),t._v(" "),a("h3",{attrs:{id:"测试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#测试"}},[t._v("#")]),t._v(" 测试")]),t._v(" "),a("p",[t._v("执行命令")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("md-cli\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("输出以下信息即代表成功。")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("基于微开发模式的脚手架工具 micro-development-cli\n\nVERSION\n  micro-development-cli/0.0.9 darwin-x64 node-v12.14.0\n\nUSAGE\n  $ md-cli "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("COMMAND"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\nCOMMANDS\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v("      （a）安装一个依赖（git仓库）\n  commit   （c）提交仓库变更（git commit）\n  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("help")]),t._v("     display "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("help")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" md-cli\n  init     初始化配置文件（micro-development.json）\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("  （i）安装配置文件中所有的依赖（git仓库），已安装则忽略\n  remove   （r）移除一个依赖（git仓库）\n  status   （s）查看一个依赖变更状态（git status）\n  update   （u）更新一个依赖（git仓库）\n\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br")])]),a("h2",{attrs:{id:"init"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#init"}},[t._v("#")]),t._v(" init")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("说明")]),t._v(" "),a("p",[t._v("初始化 配置文件 "),a("code",[t._v("micro-development.json")]),t._v(" ，执行的时候会检测当前目录是否存在该文件，存在则忽略，并给出提示。\n"),a("strong",[t._v("需要注意的是：必须在 "),a("code",[t._v("主业务仓库")]),t._v(" 根目录执行.")])])]),t._v(" "),a("h3",{attrs:{id:"示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#示例"}},[t._v("#")]),t._v(" 示例")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("md-cli init\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("执行完 "),a("code",[t._v("md-cli init")]),t._v(" 命令（类似 "),a("code",[t._v("npm init")]),t._v("） , 会让你输入包含以下信息的字段（dependencies 除外），然后生成配置文件："),a("code",[t._v("micro-development.json")]),t._v(" 。")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("FieldName")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("Type")]),t._v(" "),a("th",{staticStyle:{"text-align":"right"}},[t._v("Required")]),t._v(" "),a("th",{staticStyle:{"text-align":"right"}},[t._v("Description")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("name")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("string")]),t._v(" "),a("td",{staticStyle:{"text-align":"right"}},[t._v("yes")]),t._v(" "),a("td",{staticStyle:{"text-align":"right"}},[t._v("项目名称")])]),t._v(" "),a("tr",[a("td",[t._v("description")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("string")]),t._v(" "),a("td",{staticStyle:{"text-align":"right"}},[t._v("yes")]),t._v(" "),a("td",{staticStyle:{"text-align":"right"}},[t._v("项目描述")])]),t._v(" "),a("tr",[a("td",[t._v("author")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("string")]),t._v(" "),a("td",{staticStyle:{"text-align":"right"}},[t._v("yes")]),t._v(" "),a("td",{staticStyle:{"text-align":"right"}},[t._v("作者")])]),t._v(" "),a("tr",[a("td",[t._v("targetDir")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("string")]),t._v(" "),a("td",{staticStyle:{"text-align":"right"}},[t._v("yes")]),t._v(" "),a("td",{staticStyle:{"text-align":"right"}},[t._v("存储 "),a("code",[t._v("依赖的业务仓库")]),t._v(" 的目录位置，就像 npm 的 "),a("code",[t._v("node_modules")])])]),t._v(" "),a("tr",[a("td",[t._v("gitHost")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("string")]),t._v(" "),a("td",{staticStyle:{"text-align":"right"}},[t._v("yes")]),t._v(" "),a("td",{staticStyle:{"text-align":"right"}},[t._v("git服务器主机地址")])]),t._v(" "),a("tr",[a("td",[t._v("gitNamespace")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("string")]),t._v(" "),a("td",{staticStyle:{"text-align":"right"}},[t._v("yes")]),t._v(" "),a("td",{staticStyle:{"text-align":"right"}},[t._v("git命名空间，或者用户名（owner）")])]),t._v(" "),a("tr",[a("td",[t._v("packageKeySplit")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("string")]),t._v(" "),a("td",{staticStyle:{"text-align":"right"}},[t._v("on")]),t._v(" "),a("td",{staticStyle:{"text-align":"right"}},[t._v("packageKey是由仓库名和组织名拼接，这个是拼接符号，默认为 "),a("code",[t._v("#")])])]),t._v(" "),a("tr",[a("td",[t._v("dependencies")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("object")]),t._v(" "),a("td",{staticStyle:{"text-align":"right"}},[t._v("no")]),t._v(" "),a("td",{staticStyle:{"text-align":"right"}},[a("code",[t._v("gitPackage")]),t._v("（见术语定义）")])]),t._v(" "),a("tr",[a("td",[t._v("lock")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("boolean")]),t._v(" "),a("td",{staticStyle:{"text-align":"right"}},[t._v("yes")]),t._v(" "),a("td",{staticStyle:{"text-align":"right"}},[t._v("是否锁定，锁定之后不可以再通过脚手架操作")])])])]),t._v(" "),a("blockquote",[a("p",[t._v("注意：Required是指在输入的时候，都是必填。")])]),t._v(" "),a("h4",{attrs:{id:"dependencies"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dependencies"}},[t._v("#")]),t._v(" dependencies")]),t._v(" "),a("p",[a("code",[t._v("依赖的业务仓库")]),t._v(" 信息都存储在 dependencies 中，该字段类型为对象，key 和 value 信息如下：")]),t._v(" "),a("ul",[a("li",[t._v("key：packageKey")]),t._v(" "),a("li",[t._v("value：gitPackage")])]),t._v(" "),a("p",[t._v("key是 "),a("code",[t._v("cli")]),t._v(" 自动生成，这个名称不支持自定义，因为这个名称将代表 "),a("code",[t._v("gitPackage")]),t._v(" 在本机存储的 目录名称 ,而目录名称的定义是有限制，所以 "),a("code",[t._v("cli")]),t._v(" 内部自动处理。")]),t._v(" "),a("p",[a("strong",[t._v("完整的结构如下：")])]),t._v(" "),a("div",{staticClass:"language-ts line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InitParams")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    description"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    author"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    targetDir"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    gitHost"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    gitNamespace"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    packageKeySplit"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    dependencies"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("propName"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" PackageConfig"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    lock"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("boolean")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PackageConfig")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    gitUrl"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    gitNamespace"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    gitRepoName"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    gitBranchName"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    lock"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("boolean")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br")])]),a("h4",{attrs:{id:"targetdir"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#targetdir"}},[t._v("#")]),t._v(" targetDir")]),t._v(" "),a("p",[t._v("这个参数类似 "),a("code",[t._v("npm")]),t._v(" 包存储的目录 "),a("code",[t._v("node_modules")]),t._v(" ，默认为： "),a("code",[t._v("src/base-resource")]),t._v(" 。")]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("注意")]),t._v(" "),a("p",[t._v("必须以相对路径开头，且不能以斜杠结尾（后续会兼容可以斜杠结尾）。")])]),t._v(" "),a("p",[t._v("有效的例子：")]),t._v(" "),a("ul",[a("li",[t._v("./foo")]),t._v(" "),a("li",[t._v("foo")])]),t._v(" "),a("p",[t._v("无效的例子：")]),t._v(" "),a("ul",[a("li",[t._v("/foo 绝对路径开头")]),t._v(" "),a("li",[t._v("./foo/  以斜杠结尾")])]),t._v(" "),a("p",[t._v("假设该选项采用默认值： "),a("code",[t._v("src/base-resource")]),t._v(" ，在安装依赖的仓库时，就会把仓库安装到  "),a("code",[t._v("src/base-resource")]),t._v(" 下面。")]),t._v(" "),a("h4",{attrs:{id:"githost"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#githost"}},[t._v("#")]),t._v(" gitHost")]),t._v(" "),a("p",[t._v("示例：")]),t._v(" "),a("ul",[a("li",[t._v("GitHub ："),a("code",[t._v("git@github.com")])]),t._v(" "),a("li",[t._v("gitee : "),a("code",[t._v("git@gitee.com")])]),t._v(" "),a("li",[t._v("自定义 ： "),a("code",[t._v("git@xxx.com")])]),t._v(" "),a("li",[t._v("http协议 "),a("code",[t._v("https://github.com")])])]),t._v(" "),a("h4",{attrs:{id:"gitnamespace"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gitnamespace"}},[t._v("#")]),t._v(" gitNamespace")]),t._v(" "),a("p",[t._v("假设仓库完整的URL为："),a("code",[t._v("git@github.com:ittlr/micro-development-docs.git")]),t._v(" ，那么 "),a("code",[t._v("gitNamespace")]),t._v(" 对应的则是： "),a("code",[t._v("ittlr")]),t._v("。")]),t._v(" "),a("div",{staticClass:"custom-block danger"},[a("p",{staticClass:"custom-block-title"},[t._v("注意")]),t._v(" "),a("p",[t._v("目前对这个处理，只兼容了常规的Git路径层级，像  Gitlab  支持分组嵌套分组，路径可能会像这样：git@gitlab.com:a/b/c/e.git ，这种深层次的还未做兼容处理。（后续兼容）")])]),t._v(" "),a("h3",{attrs:{id:"配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置文件"}},[t._v("#")]),t._v(" 配置文件")]),t._v(" "),a("p",[t._v("当输出完所有参数之后，生成的配置文件  "),a("code",[t._v("micro-development.json")]),t._v(" 完整内容如下：")]),t._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"test"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"description"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"test"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"author"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"test"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"targetDir"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"src/base-resource"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"gitHost"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"git@github.com"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"gitNamespace"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ittlr"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"packageKeySplit"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"#"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"dependencies"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"lock"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br")])]),a("h4",{attrs:{id:"dependencies-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dependencies-2"}},[t._v("#")]),t._v(" dependencies")]),t._v(" "),a("p",[t._v("这个字段存储的格式如下：")]),t._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"gitRepoName#gitBranchName"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"gitRepoName"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"gitRepoName"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"gitBranchName"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"master"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"lock"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"gitUrl#gitBranchName"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"gitBranchName"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"master"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"gitUrl"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"gitUrl"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"lock"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br")])]),a("p",[a("code",[t._v("key")]),t._v(" 的格式为两种：")]),t._v(" "),a("ol",[a("li",[a("code",[t._v("gitRpoName@gitBranchName")])]),t._v(" "),a("li",[a("code",[t._v("gitUrl@gitBranchName")])])]),t._v(" "),a("p",[t._v("当为第1种时，代表的是该仓库属于全局配置的 "),a("code",[t._v("gitHost")]),t._v(" 平台下。")]),t._v(" "),a("p",[t._v("当为第2种是，代表的是使用的其他自定义的 GitServer。")]),t._v(" "),a("p",[t._v("后面拼接的 "),a("code",[t._v("#gitBranchName")]),t._v(" 是为了可以针对一个仓库使用不同分支而实现的"),a("strong",[t._v("唯一标识")]),t._v("。")]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("说明")]),t._v(" "),a("p",[t._v("具体依赖的操作，下面通过各种命令进行说明。")])]),t._v(" "),a("h2",{attrs:{id:"add"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#add"}},[t._v("#")]),t._v(" add")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("添加包")]),t._v(" "),a("p",[t._v("添加依赖（git仓库），写入配置文件中 "),a("code",[t._v("dependencies")]),t._v(" 中。")])]),t._v(" "),a("h3",{attrs:{id:"格式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#格式"}},[t._v("#")]),t._v(" 格式")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("md-cli "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# or md-cli a")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("执行 "),a("code",[t._v("add")]),t._v(" 命令后，会出现一个下拉选项：")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("? 使用默认配置或者自定义？（选择使用默认配置还是自定义）\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" 默认？继续输入仓库名和分支名\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" 自定义？输入其他git平台的地址\n  Answer:\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("h4",{attrs:{id:"选择-1-默认"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#选择-1-默认"}},[t._v("#")]),t._v(" 选择 1 默认")]),t._v(" "),a("p",[t._v("会让你输入以下几个选项:")]),t._v(" "),a("ul",[a("li",[t._v("gitNamespace "),a("code",[t._v("String")]),t._v(" git命名空间 "),a("strong",[t._v("（可选，如果这里输入了，即代表该仓库所属命名空间不属于全局配置的git命名空间）")])]),t._v(" "),a("li",[t._v("gitRepoName : "),a("code",[t._v("String")]),t._v(" 仓库名称 "),a("strong",[t._v("（必选）")])]),t._v(" "),a("li",[t._v("gitBranchName : "),a("code",[t._v("String")]),t._v(" 分支名称，默认为 "),a("code",[t._v("master")]),t._v(" "),a("strong",[t._v("（必选）")])]),t._v(" "),a("li",[t._v("lock : "),a("code",[t._v("Boolean")]),t._v(" 是否锁定，默认为 false ，不锁定。 "),a("strong",[t._v("（必选）")])])]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("注意")]),t._v(" "),a("p",[t._v("输入完成后，内部会以 "),a("code",[t._v("${gitRepoName}#${gitBranchName}")]),t._v(" 作为唯一表示，检测是否已在 "),a("code",[t._v("dependencies")]),t._v(" 中。")])]),t._v(" "),a("p",[t._v("最终生成的结构如下：")]),t._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"dependencies"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"${gitRepoName}#${gitBranchName}"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"gitNamespace"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"没输入则没有该字段"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"gitRepoName"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"输入的仓库名"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"gitBranchName"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"输入的分支名"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"lock"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"选择的 true/false"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br")])]),a("h4",{attrs:{id:"选择-2-自定义"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#选择-2-自定义"}},[t._v("#")]),t._v(" 选择 2 自定义")]),t._v(" "),a("p",[t._v("会让你输入以下几个选项:")]),t._v(" "),a("ul",[a("li",[t._v("gitUrl : "),a("code",[t._v("String")]),t._v(" 仓库地址，"),a("strong",[t._v("必须是完整的可以被git克隆的URL，可以是http协议，也可以是ssh协议")]),t._v(" "),a("strong",[t._v("（必选）")])]),t._v(" "),a("li",[t._v("gitBranchName : "),a("code",[t._v("String")]),t._v(" 分支名称，默认为 "),a("code",[t._v("master")]),t._v(" "),a("strong",[t._v("（必选）")])]),t._v(" "),a("li",[t._v("lock : "),a("code",[t._v("Boolean")]),t._v(" 是否锁定，默认为 false ，不锁定。 "),a("strong",[t._v("（必选）")])])]),t._v(" "),a("p",[t._v("最终生成的示例结构如下：")]),t._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"dependencies"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"处理后的标识"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"lock"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"选择的 true/false"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"gitUrl"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"输入的gitUrl"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br")])]),a("p",[t._v("这里有个需要注意的地方：输入的 "),a("code",[t._v("gitUrl")]),t._v(" 支持两种方式："),a("code",[t._v("ssh协议")]),t._v(" 或 "),a("code",[t._v("http协议")]),t._v("，两种协议的主要区别是：主机和git命名空间之间分隔符不同，前者用的是冒号 "),a("code",[t._v(":")]),t._v(" ，后者用的是斜杠 "),a("code",[t._v("/")]),t._v(" 。")]),t._v(" "),a("p",[t._v("以命令行中给出的示例："),a("code",[t._v("git@github.com:username/repo.git")]),t._v(" 和 "),a("code",[t._v("https://github.com/username/repo.git")]),t._v(" 为例，内部会做以下处理：")]),t._v(" "),a("ol",[a("li",[t._v("去掉开头前面的协议： "),a("code",[t._v("git@")]),t._v(" 或 "),a("code",[t._v("http://")]),t._v(" 或 "),a("code",[t._v("https://")]),t._v(" ，还剩下 "),a("code",[t._v("github.com:username/repo.git")]),t._v(" 或 "),a("code",[t._v("github.com/username/repo.git")]),t._v(" 。")]),t._v(" "),a("li",[t._v("去掉.git后缀："),a("code",[t._v(".git")]),t._v(" ，还剩下："),a("code",[t._v("github.com:username/repo")]),t._v(" 或 "),a("code",[t._v("github.com/username/repo")]),t._v(" 。")]),t._v(" "),a("li",[t._v("所有斜杠 "),a("code",[t._v("/")]),t._v(" 替换成 "),a("code",[t._v("@")]),t._v(" ，如果是 "),a("code",[t._v("ssh协议")]),t._v(" , 把冒号 "),a("code",[t._v(":")]),t._v(" 也替换为 "),a("code",[t._v("@")]),t._v(" ，最终的结果就是："),a("code",[t._v("github.com@username@repo")]),t._v(" 。")]),t._v(" "),a("li",[t._v("在最后，拼接一下分支 "),a("code",[t._v("#分支名")]),t._v(" , 最终得出唯一的标识，存到 "),a("code",[t._v("dependencies")]),t._v(" 中。")]),t._v(" "),a("li",[t._v("所以，如果输入 "),a("code",[t._v("git@github.com:username/repo.git")]),t._v(" 和 "),a("code",[t._v("https://github.com/username/repo.git")]),t._v(" 两个URL，如果选择的分支都是一样的话，那么内部就可以判断为："),a("strong",[t._v("添加依赖重复")]),t._v("。")])]),t._v(" "),a("p",[t._v("最终生成的完成结构如下：")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"dependencies"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"github.com@username@repo#master"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lock"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" false,\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"gitUrl"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"git@github.com:username/repo.git"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br")])]),a("p",[t._v("或者")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"dependencies"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"github.com@username@repo#master"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lock"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" false,\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"gitUrl"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://github.com/username/repo.git"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br")])]),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("注意")]),t._v(" "),a("p",[a("code",[t._v("add")]),t._v(" 命令，仅仅是写入文件，不立即安装。（后续版本会支持）")])]),t._v(" "),a("h2",{attrs:{id:"install"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#install"}},[t._v("#")]),t._v(" install")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("安装包")]),t._v(" "),a("p",[t._v("把 "),a("code",[t._v("add")]),t._v(" 添加的包，也就是 "),a("code",[t._v("dependencies")]),t._v(" 字段中的包，执行 "),a("code",[t._v("git clone")]),t._v(" 安装到本地。")]),t._v(" "),a("p",[a("strong",[t._v("如果已安装，则给出提示自动跳过")])])]),t._v(" "),a("h3",{attrs:{id:"格式-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#格式-2"}},[t._v("#")]),t._v(" 格式")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("md-cli "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# or md-cli i")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("注意")]),t._v(" "),a("p",[t._v("如果 全局 "),a("code",[t._v("lock")]),t._v(" 为 "),a("code",[t._v("true")]),t._v(" ，则不执行安装； 某个包中的 "),a("code",[t._v("lock")]),t._v(" 为 "),a("code",[t._v("true")]),t._v(" ，则跳过。")])]),t._v(" "),a("h2",{attrs:{id:"update"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#update"}},[t._v("#")]),t._v(" update")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("更新包")]),t._v(" "),a("p",[t._v("更新包，内部是执行 "),a("code",[t._v("git pull")]),t._v("。")])]),t._v(" "),a("h3",{attrs:{id:"格式-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#格式-3"}},[t._v("#")]),t._v(" 格式")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("md-cli update "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("option?"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("option 参数分为以下三种情况：")]),t._v(" "),a("ol",[a("li",[a("code",[t._v("all")])]),t._v(" "),a("li",[a("code",[t._v("packageKey")])]),t._v(" "),a("li",[t._v("不传参数")])]),t._v(" "),a("h4",{attrs:{id:"all"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#all"}},[t._v("#")]),t._v(" all")]),t._v(" "),a("p",[t._v("当为 "),a("code",[t._v("all")]),t._v(" 时，会遍历  "),a("code",[t._v("dependencies")]),t._v(" 字段中所有的包，进行遍历更新，同时，会检测包全局配置的 "),a("code",[t._v("lock")]),t._v(" 和 每一个包的 "),a("code",[t._v("lock")]),t._v(" 。")]),t._v(" "),a("h4",{attrs:{id:"packagekey"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#packagekey"}},[t._v("#")]),t._v(" packageKey")]),t._v(" "),a("p",[a("code",[t._v("packageKey")]),t._v(" 必须是 配置文件中  "),a("code",[t._v("dependencies")]),t._v(" 字段中的某一个完整的 "),a("code",[t._v("key")]),t._v("值，同时，会检测包全局配置的 "),a("code",[t._v("lock")]),t._v(" 和 当前包的 "),a("code",[t._v("lock")]),t._v(" 。")]),t._v(" "),a("h4",{attrs:{id:"不传参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#不传参数"}},[t._v("#")]),t._v(" 不传参数")]),t._v(" "),a("p",[t._v("当不传参数时，会列出一个下拉框，下拉框的每一个选项则是：配置文件中  "),a("code",[t._v("dependencies")]),t._v(" 字段的所有的 "),a("code",[t._v("key")]),t._v(" ，由你手动选择进行更新，同时，会检测包全局配置的 "),a("code",[t._v("lock")]),t._v(" 和 当前包的 "),a("code",[t._v("lock")]),t._v(" 。")]),t._v(" "),a("h2",{attrs:{id:"status"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#status"}},[t._v("#")]),t._v(" status")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("变更状态")]),t._v(" "),a("p",[t._v("查看包的Git变更状态，内部是执行 "),a("code",[t._v("git status")]),t._v("。")])]),t._v(" "),a("h3",{attrs:{id:"格式-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#格式-4"}},[t._v("#")]),t._v(" 格式")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("md-cli status "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("option?"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("option 参数分为以下三种情况：")]),t._v(" "),a("ol",[a("li",[a("code",[t._v("all")])]),t._v(" "),a("li",[a("code",[t._v("packageKey")])]),t._v(" "),a("li",[t._v("不传参数")])]),t._v(" "),a("h4",{attrs:{id:"all-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#all-2"}},[t._v("#")]),t._v(" all")]),t._v(" "),a("p",[t._v("当为 "),a("code",[t._v("all")]),t._v(" 时，会遍历  "),a("code",[t._v("dependencies")]),t._v(" 字段中所有的包，进行遍历更新，同时，会检测包全局配置的 "),a("code",[t._v("lock")]),t._v(" 和 每一个包的 "),a("code",[t._v("lock")]),t._v(" 。")]),t._v(" "),a("h4",{attrs:{id:"packagekey-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#packagekey-2"}},[t._v("#")]),t._v(" packageKey")]),t._v(" "),a("p",[a("code",[t._v("packageKey")]),t._v(" 必须是 配置文件中  "),a("code",[t._v("dependencies")]),t._v(" 字段中的某一个完整的 "),a("code",[t._v("key")]),t._v("值，同时，会检测包全局配置的 "),a("code",[t._v("lock")]),t._v(" 和 当前包的 "),a("code",[t._v("lock")]),t._v(" 。")]),t._v(" "),a("h4",{attrs:{id:"不传参数-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#不传参数-2"}},[t._v("#")]),t._v(" 不传参数")]),t._v(" "),a("p",[t._v("当不传参数时，会列出一个下拉框，下拉框的每一个选项则是：配置文件中  "),a("code",[t._v("dependencies")]),t._v(" 字段的所有的 "),a("code",[t._v("key")]),t._v(" ，由你手动选择进行更新，同时，会检测包全局配置的 "),a("code",[t._v("lock")]),t._v(" 和 当前包的 "),a("code",[t._v("lock")]),t._v(" 。")]),t._v(" "),a("h2",{attrs:{id:"commit"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#commit"}},[t._v("#")]),t._v(" commit")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("git提交")]),t._v(" "),a("p",[t._v("提交依赖中的变更，内部执行 "),a("code",[t._v("git commit -a && git commit -am commitContent && git pull && git push")]),t._v(" (后面会把 push 分开)。")])]),t._v(" "),a("h3",{attrs:{id:"格式-5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#格式-5"}},[t._v("#")]),t._v(" 格式")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("md-cli commit "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("option"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("option 参数分为以下两种情况：")]),t._v(" "),a("blockquote",[a("p",[a("strong",[t._v("按照git标准，提交信息必须明确且语义化，所以一次只能提交一个仓库。（虽然可以一次提交多个仓库，但有违常理😁）")])])]),t._v(" "),a("ol",[a("li",[a("code",[t._v("packageKey")])]),t._v(" "),a("li",[t._v("不传参数")])]),t._v(" "),a("h4",{attrs:{id:"packagekey-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#packagekey-3"}},[t._v("#")]),t._v(" packageKey")]),t._v(" "),a("p",[a("code",[t._v("packageKey")]),t._v(" 必须是 配置文件中  "),a("code",[t._v("dependencies")]),t._v(" 字段中的某一个完整的 "),a("code",[t._v("key")]),t._v("值，同时，会检测包全局配置的 "),a("code",[t._v("lock")]),t._v(" 和 当前包的 "),a("code",[t._v("lock")]),t._v(" 。")]),t._v(" "),a("p",[t._v("检测通过之后，会再次让输入 "),a("code",[t._v("git commit")]),t._v(" 的信息 "),a("code",[t._v("commitContent")]),t._v(" ,输入完成之后，进行提交git。")]),t._v(" "),a("h4",{attrs:{id:"不传参数-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#不传参数-3"}},[t._v("#")]),t._v(" 不传参数")]),t._v(" "),a("p",[t._v("当不传参数时，会列出一个下拉框，下拉框的每一个选项则是：配置文件中  "),a("code",[t._v("dependencies")]),t._v(" 字段的所有的 "),a("code",[t._v("key")]),t._v(" ，由你手动选择进行移除，同时，会检测包全局配置的 "),a("code",[t._v("lock")]),t._v(" 和 当前包的 "),a("code",[t._v("lock")]),t._v(" 。")]),t._v(" "),a("p",[t._v("选择并检测通过之后，会再次让输入 "),a("code",[t._v("git commit")]),t._v(" 的信息  "),a("code",[t._v("commitContent")]),t._v(" ,输入完成之后，进行提交git。")]),t._v(" "),a("h2",{attrs:{id:"remove"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#remove"}},[t._v("#")]),t._v(" remove")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("移除包")]),t._v(" "),a("p",[t._v("移除包，从配置文件中移除指定的包，然后更新配置文件，不会删除已安装在本地的物理文件（如果已安装的话）。")])]),t._v(" "),a("h3",{attrs:{id:"格式-6"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#格式-6"}},[t._v("#")]),t._v(" 格式")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("md-cli remove "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("option"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("option 参数分为以下三种情况：")]),t._v(" "),a("ol",[a("li",[a("code",[t._v("all")])]),t._v(" "),a("li",[a("code",[t._v("packageKey")])]),t._v(" "),a("li",[t._v("不传参数")])]),t._v(" "),a("h4",{attrs:{id:"all-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#all-3"}},[t._v("#")]),t._v(" all")]),t._v(" "),a("p",[t._v("当为 "),a("code",[t._v("all")]),t._v(" 时，会遍历 配置文件中的  "),a("code",[t._v("dependencies")]),t._v(" 字段中所有的包，进行遍历移除，同时，会检测包全局配置的 "),a("code",[t._v("lock")]),t._v(" 和 每一个包的 "),a("code",[t._v("lock")]),t._v(" 。")]),t._v(" "),a("h4",{attrs:{id:"packagekey-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#packagekey-4"}},[t._v("#")]),t._v(" packageKey")]),t._v(" "),a("p",[a("code",[t._v("packageKey")]),t._v(" 必须是 配置文件中  "),a("code",[t._v("dependencies")]),t._v(" 字段中的某一个完整的 "),a("code",[t._v("key")]),t._v("值，同时，会检测包全局配置的 "),a("code",[t._v("lock")]),t._v(" 和 当前包的 "),a("code",[t._v("lock")]),t._v(" 。")]),t._v(" "),a("h4",{attrs:{id:"不传参数-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#不传参数-4"}},[t._v("#")]),t._v(" 不传参数")]),t._v(" "),a("p",[t._v("当不传参数时，会列出一个下拉框，下拉框的每一个选项则是：配置文件中  "),a("code",[t._v("dependencies")]),t._v(" 字段的所有的 "),a("code",[t._v("key")]),t._v(" ，由你手动选择进行移除，同时，会检测包全局配置的 "),a("code",[t._v("lock")]),t._v(" 和 当前包的 "),a("code",[t._v("lock")]),t._v(" 。")])])}),[],!1,null,null,null);s.default=n.exports}}]);